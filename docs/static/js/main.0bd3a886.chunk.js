(this["webpackJsonpwater-marker-array"]=this["webpackJsonpwater-marker-array"]||[]).push([[0],{101:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(33),l=t.n(i),c=(t(99),t(63)),o=t.n(c),s=t(74),b=t(47),u=t(9),m=(t(101),t(164)),f=t(165),j=t(158),p=t(159),d=t(155),h=t(156),g=t(160),v=t(157),O=t(168),w=t(85),x=t(16),S=t(77),L=t.n(S),y=t(15),C={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}},k=Object.keys(C).map((function(e){return{value:e,label:e}})),I=[{value:200,label:"200ppi"},{value:300,label:"300ppi"},{value:600,label:"600ppi"}],N=25.4,z=[{label:"-default-",value:"serif"}].concat(Object(y.a)(Array.from(new Set(Array.from(document.fonts).map((function(e){return e.family})))).map((function(e){return{label:e,value:e}})))),F=t(163),D=t(2),P="CanvasContainer",W=function(e,a){var t=e.getContext("2d"),n=C[a.paperSize],r=a.precision;e.width=n.width/N*r,e.height=n.height/N*r;var i=a.fontSize/N*r,l=a.rowSpace/N*r,c=a.colSpace/N*r,o=a.rowShift/N*r,s=2*Math.max(e.width,e.height),b=e.width/2,u=e.height/2,m=-s/2,f=-s/2;t.fillStyle="#ffffff",t.clearRect(m+b,f+u,s,s),a.image&&t.drawImage(a.image,0,0,e.width,e.height),t.translate(b,u),t.rotate(a.rotate*Math.PI/180),t.translate(m,f);var j=a.text;t.font="".concat(a.fontWeight||"normal"," ").concat(i,"px ").concat(a.fontFamily||"serif"),t.textBaseline="middle";var p=t.measureText(j),d=p.width,h=p.fontBoundingBoxAscent+p.fontBoundingBoxDescent;t.fillStyle=a.color;for(var g=0,v=0,O=0;v<=s;){if(g>s+o*O){var w=h+c;t.translate(-o,w),g=-o*O,v+=w,O++}t.fillText(j,g,0),g+=d+l}};function B(){var e=Object(F.a)().t,a=Object(x.b)(k[1].value),t=Object(u.a)(a,4),r=t[0],i=t[2],l=t[3],c=Object(x.b)(I[1].value),S=Object(u.a)(c,4),y=S[0],B=S[2],T=S[3],A=Object(x.b)((new Date).toLocaleDateString()),R=Object(u.a)(A,4),E=R[0],M=R[2],J=R[3],Q=Object(x.b)("rgba(0, 0, 0, 0.1)"),U=Object(u.a)(Q,4),q=U[0],V=U[2],X=U[3],Y=Object(x.b)(z[0].value),_=Object(u.a)(Y,4),G=_[0],H=_[2],K=_[3],Z=Object(x.b)(6),$=Object(u.a)(Z,4),ee=$[0],ae=$[2],te=$[3],ne=Object(x.b)("400"),re=Object(u.a)(ne,4),ie=re[0],le=re[2],ce=re[3],oe=Object(x.b)(10),se=Object(u.a)(oe,4),be=se[0],ue=se[2],me=se[3],fe=Object(x.b)(10),je=Object(u.a)(fe,4),pe=je[0],de=je[2],he=je[3],ge=Object(x.b)(315),ve=Object(u.a)(ge,4),Oe=ve[0],we=ve[2],xe=ve[3],Se=Object(x.b)(10),Le=Object(u.a)(Se,4),ye=Le[0],Ce=Le[2],ke=Le[3],Ie=Object(x.b)(),Ne=Object(u.a)(Ie,4),ze=Ne[0],Fe=Ne[2],De=Ne[3],Pe=Object(x.a)(void 0),We=Object(u.a)(Pe,1)[0],Be=Object(x.a)(!1),Te=Object(u.a)(Be,1)[0],Ae=Object(x.a)(!1),Re=Object(u.a)(Ae,1)[0],Ee=Object(n.useCallback)((function(){return{paperSize:i.value,precision:B.value,text:M.value,color:V.value,fontFamily:H.value,fontSize:ae.value,fontWeight:le.value,rowSpace:ue.value,colSpace:de.value,rotate:we.value,rowShift:Ce.value,image:Fe.value}}),[i,B,M,V,H,ae,le,ue,de,we,Ce,Fe]),Me=Object(x.a)({paperSize:"",precision:-1,text:"",color:"",fontFamily:"",fontSize:-1,fontWeight:"",rowSpace:-1,colSpace:-1,rotate:-1,rowShift:-1}),Je=Object(u.a)(Me,1)[0],Qe=Object(n.useCallback)((function(e){var a=Je.value,t=Object(b.a)(Object(b.a)({},Ee()),e);return a.paperSize!==t.paperSize||a.precision!==t.precision||a.text!==t.text||a.color!==t.color||a.fontFamily!==t.fontFamily||a.fontSize!==t.fontSize||a.fontWeight!==t.fontWeight||a.rowSpace!==t.rowSpace||a.colSpace!==t.colSpace||a.rotate!==t.rotate||a.rowShift!==t.rowShift}),[Je,Ee]),Ue=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var a,t,n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Re.value){e.next=2;break}return e.abrupt("return");case 2:if(a=!1,e.prev=3,Te.value=!0,console.log("render at",(new Date).toLocaleTimeString()),We.value){e.next=19;break}if(!(t=document.getElementById(P))){e.next=14;break}We.value=document.createElement("canvas"),We.value.style.width="100%",t.append(We.value),e.next=17;break;case 14:return a=!0,requestAnimationFrame(Ue),e.abrupt("return");case 17:e.next=25;break;case 19:n=We.value,r={precision:100},i=Object(b.a)(Object(b.a)({},Ee()),r),W(n,i),Je.value=i,Qe(r)&&(a=!0,requestAnimationFrame(Ue));case 25:return e.prev=25,Te.value=a,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,,25,28]])}))),[Re,Te,We,Je,Qe,Ee]);Object(n.useEffect)((function(){return Ue().then(),function(){Re.value=!0}}),[Ue,Re]),Object(n.useEffect)((function(){Te.value||Ue().then()}),[Ue,Te,r,y,E,q,G,ee,ie,be,pe,Oe,ye,ze]);var qe=Object(n.useCallback)((function(e){if(e.target.files&&e.target.files.length>0){var a=new Image;a.onload=function(){De(a)},a.src=URL.createObjectURL(e.target.files[0])}}),[De]),Ve=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",a=document.createElement("canvas"),t=Ee(),n=C[t.paperSize];return a.width=n.width/N*t.precision,a.height=n.height/N*t.precision,W(a,t),a.toDataURL(e,1)}),[Ee]),Xe=Object(n.useCallback)((function(){L()(Ve(),"image")}),[Ve]),Ye=Object(n.useState)(),_e=Object(u.a)(Ye,2),Ge=_e[0],He=_e[1],Ke=Object(n.useCallback)((function(e){e.preventDefault(),He((function(a){return a?void 0:{left:e.clientX-2,top:e.clientY-4}}))}),[]),Ze=Object(n.useCallback)((function(){He(void 0)}),[]),$e=Object(n.useCallback)((function(){Xe(),Ze()}),[Xe,Ze]),ea=Object(n.useCallback)((function(){var e=document.createElement("a");e.target="_blank",e.download="".concat(M.value||"image",".png"),e.href=Ve("image/octet-stream"),e.click(),Ze()}),[M,Ve,Ze]);return Object(D.jsxs)("div",{className:"app-wrapper",children:[Object(D.jsxs)(m.a,{className:"paper form-wrapper ".concat(e("form.style.i18nClass")),children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(p.a,{id:"PaperSizeLabel",children:e("form.paperSizeLabel")}),Object(D.jsx)(d.a,{labelId:"PaperSizeLabel",value:r,onChange:function(e){return l(e.target.value)},children:k.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.value)}))})]}),Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(p.a,{id:"PrecisionLabel",children:e("form.printQuality")}),Object(D.jsx)(d.a,{labelId:"PrecisionLabel",value:y,onChange:function(e){return T(e.target.value)},children:I.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.value)}))})]})]}),Object(D.jsx)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(D.jsx)(g.a,{fullWidth:!0,label:e("form.waterMarkerText"),variant:"standard",value:E,onChange:function(e){return J(e.target.value)}})}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsxs)(p.a,{id:"FontFamilyLabel",children:[e("form.font.familyLabel"),":"]}),Object(D.jsx)(d.a,{labelId:"FontFamilyLabel",value:G,onChange:function(e){return K(e.target.value)},children:z.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.label)}))})]}),Object(D.jsx)(g.a,{fullWidth:!0,label:e("form.font.weightLabel"),variant:"standard",value:ie,onChange:function(e){return ce(e.target.value)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsx)(g.a,{fullWidth:!0,label:e("form.font.colorLabel"),variant:"standard",value:q,onChange:function(e){return X(e.target.value)}}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.font.sizeLabel")," (mm):"]}),Object(D.jsx)(v.a,{"aria-label":e("form.font.sizeLabel"),valueLabelDisplay:"auto",min:2,value:ee,onChange:function(e,a){return te(a)}})]})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rowSpaceLabel")," (mm):"]}),Object(D.jsx)(v.a,{"aria-label":e("form.layout.rowSpaceLabel"),valueLabelDisplay:"auto",min:1,value:be,onChange:function(e,a){return me(a)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.colSpaceLabel")," (mm):"]}),Object(D.jsx)(v.a,{"aria-label":e("form.layout.colSpaceLabel"),valueLabelDisplay:"auto",min:1,value:pe,onChange:function(e,a){return he(a)}})]})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rotateLabel")," (\xb0):"]}),Object(D.jsx)(v.a,{"aria-label":e("form.layout.rotateLabel"),valueLabelDisplay:"auto",min:0,max:360,value:Oe,onChange:function(e,a){return xe(a)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rowShiftLabel")," (mm):"]}),Object(D.jsx)(v.a,{"aria-label":e("form.layout.rowShiftLabel"),valueLabelDisplay:"auto",min:1,value:ye,onChange:function(e,a){return ke(a)}})]})]}),Object(D.jsx)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsx)(g.a,{fullWidth:!0,label:e("form.backgroundImage"),variant:"standard",InputLabelProps:{shrink:!0},type:"file",onChange:qe}),Object(D.jsx)(O.a,{onClick:Xe,children:e("form.print")})]})})]}),Object(D.jsx)(m.a,{className:"canvas-container",id:P,onContextMenu:Ke}),Object(D.jsxs)(w.a,{open:!!Ge,onClose:Ze,anchorReference:"anchorPosition",anchorPosition:Ge,children:[Object(D.jsx)(h.a,{onClick:$e,children:e("form.print")}),Object(D.jsx)(h.a,{onClick:ea,children:e("form.download")})]})]})}var T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,169)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,i=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),i(e),l(e)}))},A=t(55),R=t(37),E=t(83),M=t(84),J=t(67),Q={en:{translation:M},zh:{translation:J},"zh-CN":{translation:J}};A.a.use(R.e).use(E.a).init({fallbackLng:"en",interpolation:{escapeValue:!1},resources:Q}).then(),console.log("i18n:",A.a);var U=A.a,q=t(153);l.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(q.a,{i18n:U,children:Object(D.jsx)(B,{})})}),document.getElementById("root")),T()},67:function(e){e.exports=JSON.parse('{"form":{"style":{"i18nClass":"i18n-zhCN"},"paperSizeLabel":"\u7eb8\u5f20\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5185\u5bb9","font":{"familyLabel":"\u5b57\u4f53\u7c7b\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u4f53\u989c\u8272","sizeLabel":"\u5b57\u4f53\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u95f4\u9694","colSpaceLabel":"\u5782\u76f4\u95f4\u9694","rotateLabel":"\u65cb\u8f6c\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u56fe\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f7d\u56fe\u7247"}}')},84:function(e){e.exports=JSON.parse('{"form":{"style":{"i18nClass":"i18n-en"},"paperSizeLabel":"Paper","printQuality":"Print Quality","waterMarkerText":"Text","font":{"familyLabel":"Font Family","weightLabel":"Font Weight","colorLabel":"Font Color","sizeLabel":"Font Size"},"layout":{"rowSpaceLabel":"Row Space","colSpaceLabel":"Col Space","rotateLabel":"Rotate","rowShiftLabel":"Row Shift"},"backgroundImage":"Image","print":"Print","download":"Download Image"}}')},99:function(e,a,t){}},[[113,1,2]]]);