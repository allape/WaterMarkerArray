(this["webpackJsonpwater-marker-array"]=this["webpackJsonpwater-marker-array"]||[]).push([[0],{102:function(e,a,t){},104:function(e,a,t){},116:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),l=t(37),i=t.n(l),o=(t(102),t(14)),s=t(17),u=t.n(s),b=t(33),j=t(10),f=(t(104),t(167)),d=t(168),p=t(161),h=t(162),O=t(158),m=t(159),g=t(163),v=t(160),x=t(171),w=t(172),L=t(88),y=t(18),S=t(79),k=t.n(S),C=t(166),z=t(3),W=t(51),I=t(41),N=t(81),F=t(82),P=t(66),T=t(67),B={en:{name:"English",language:"en",resource:F},zh:{name:"\u4e2d\u6587",language:"zh",resource:P},"zh-CN":{name:"\u7b80\u4f53\u4e2d\u6587",language:"zh-CN",resource:P},"zh-TW":{name:"\u7e41\u9ad4\u4e2d\u6587(\u53f0\u7063)",language:"zh-TW",resource:T},"zh-HK":{name:"\u7e41\u9ad4\u4e2d\u6587(\u9999\u6e2f)",language:"zh-HK",resource:T}},D=null===(n=window.navigator)||void 0===n?void 0:n.language,E=D&&Object.keys(B).includes(D)?D:B.en.language,M=Object.values(B);W.a.use(I.e).use(N.a).init({fallbackLng:B.en.language,interpolation:{escapeValue:!1},resources:Object.values(B).reduce((function(e,a){return Object(o.a)(Object(o.a)({},e),{},Object(z.a)({},a.language,{translation:a.resource}))}),{})}).then(Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.changeLanguage(E);case 2:console.log("i18n:",W.a);case 3:case"end":return e.stop()}}),e)}))));var A=W.a,R={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}},J=Object.keys(R).map((function(e){return{value:e,label:e}})),Q=[{value:200,label:"200ppi"},{value:300,label:"300ppi"},{value:600,label:"600ppi"},{value:1200,label:"1200ppi"}],q=25.4,H=self||window;function K(e,a){var t=R[a.paperSize],n=a.precision,r=t.width/q*n,c=t.height/q*n;if(null==e){if(!("OffscreenCanvas"in H))throw new Error("Current browser does NOT support OffscreenCanvas, you have to provide a Canvas Object to render.");e=new OffscreenCanvas(r,c)}else e.width=t.width/q*n,e.height=t.height/q*n;var l=e.getContext("2d"),i=a.fontSize/q*n,o=a.rowSpace/q*n,s=a.colSpace/q*n,u=a.rowShift/q*n,b=2*Math.max(r,c),j=r/2,f=c/2,d=-b/2,p=-b/2;l.fillStyle="#ffffff",l.clearRect(d+j,p+f,b,b),a.image&&l.drawImage(a.image.bitmap,0,0,r,c),l.translate(j,f),l.rotate(a.rotate*Math.PI/180),l.translate(d,p);var h=a.text;l.font="".concat(a.fontWeight||"normal"," ").concat(i,"px ").concat(a.fontFamily||"serif"),l.textBaseline="middle";var O=l.measureText(h),m=O.width,g=O.fontBoundingBoxAscent+O.fontBoundingBoxDescent;l.fillStyle=a.color;for(var v=0,x=0,w=0;x<=b;){if(v>b+u*w){var L=g+s;l.translate(-u,L),v=-u*w,x+=L,w++}l.fillText(h,v,0),v+=m+o}return e}var U=t(85),V=t(2),X="CanvasContainer",Y={className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center"};function _(){var e=Object(C.a)(),a=e.t,t=e.i18n,n=Object(U.a)(),c=n.loading,l=n.load,i=n.loaded,s=n.isLoading,S=Object(r.useState)(E),z=Object(j.a)(S,2),W=z[0],I=z[1],N=Object(r.useCallback)(function(){var e=Object(b.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.changeLanguage(a);case 2:I(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[t]);Object(r.useEffect)((function(){window.document.title=a("title")}),[a,t.language]);var F=Object(y.b)(J[1].value),P=Object(j.a)(F,4),T=P[0],B=P[2],D=P[3],A=Object(y.b)(Q[1].value),R=Object(j.a)(A,4),q=R[0],H=R[2],_=R[3],G=Object(y.b)((new Date).toLocaleDateString()),Z=Object(j.a)(G,4),$=Z[0],ee=Z[2],ae=Z[3],te=Object(y.b)("rgba(0, 0, 0, 0.1)"),ne=Object(j.a)(te,4),re=ne[0],ce=ne[2],le=ne[3],ie=Object(y.b)("serif"),oe=Object(j.a)(ie,4),se=oe[0],ue=oe[2],be=oe[3],je=Object(y.b)(6),fe=Object(j.a)(je,4),de=fe[0],pe=fe[2],he=fe[3],Oe=Object(y.b)("400"),me=Object(j.a)(Oe,4),ge=me[0],ve=me[2],xe=me[3],we=Object(y.b)(10),Le=Object(j.a)(we,4),ye=Le[0],Se=Le[2],ke=Le[3],Ce=Object(y.b)(10),ze=Object(j.a)(Ce,4),We=ze[0],Ie=ze[2],Ne=ze[3],Fe=Object(y.b)(315),Pe=Object(j.a)(Fe,4),Te=Pe[0],Be=Pe[2],De=Pe[3],Ee=Object(y.b)(10),Me=Object(j.a)(Ee,4),Ae=Me[0],Re=Me[2],Je=Me[3],Qe=Object(y.b)(),qe=Object(j.a)(Qe,4),He=qe[0],Ke=qe[2],Ue=qe[3],Ve=Object(y.a)(void 0),Xe=Object(j.a)(Ve,1)[0],Ye=Object(y.a)(!1),_e=Object(j.a)(Ye,1)[0],Ge=Object(y.a)(!1),Ze=Object(j.a)(Ge,1)[0],$e=Object(r.useCallback)((function(){return{paperSize:B.value,precision:H.value,text:ee.value,color:ce.value,fontFamily:ue.value,fontSize:pe.value,fontWeight:ve.value,rowSpace:Se.value,colSpace:Ie.value,rotate:Be.value,rowShift:Re.value,image:Ke.value}}),[B,H,ee,ce,ue,pe,ve,Se,Ie,Be,Re,Ke]),ea=Object(y.a)({paperSize:"",precision:-1,text:"",color:"",fontFamily:"",fontSize:-1,fontWeight:"",rowSpace:-1,colSpace:-1,rotate:-1,rowShift:-1}),aa=Object(j.a)(ea,1)[0],ta=Object(r.useCallback)((function(e){var a=aa.value,t=Object(o.a)(Object(o.a)({},$e()),e);return a.paperSize!==t.paperSize||a.precision!==t.precision||a.text!==t.text||a.color!==t.color||a.fontFamily!==t.fontFamily||a.fontSize!==t.fontSize||a.fontWeight!==t.fontWeight||a.rowSpace!==t.rowSpace||a.colSpace!==t.colSpace||a.rotate!==t.rotate||a.rowShift!==t.rowShift}),[aa,$e]),na=Object(r.useCallback)(Object(b.a)(u.a.mark((function e(){var a,t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ze.value){e.next=2;break}return e.abrupt("return");case 2:if(a=!1,e.prev=3,_e.value=!0,console.log("render at",(new Date).toLocaleTimeString()),Xe.value){e.next=19;break}if(!(t=document.getElementById(X))){e.next=14;break}Xe.value=document.createElement("canvas"),Xe.value.style.width="100%",t.append(Xe.value),e.next=17;break;case 14:return a=!0,requestAnimationFrame(na),e.abrupt("return");case 17:e.next=25;break;case 19:n=Xe.value,r={precision:100},c=Object(o.a)(Object(o.a)({},$e()),r),K(n,c),aa.value=c,ta(r)&&(a=!0,requestAnimationFrame(na));case 25:return e.prev=25,_e.value=a,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,,25,28]])}))),[Ze,_e,Xe,aa,ta,$e]);Object(r.useEffect)((function(){return na().then(),function(){Ze.value=!0}}),[na,Ze]),Object(r.useEffect)((function(){_e.value||na().then()}),[na,_e,T,q,$,re,se,de,ge,ye,We,Te,Ae,He]);var ra=Object(r.useCallback)(function(){var e=Object(b.a)(u.a.mark((function e(a){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.target.files&&a.target.files.length>0)){e.next=19;break}return t=l(),e.prev=2,e.t0=Ue,e.t1=createImageBitmap,e.t2=Blob,e.next=8,a.target.files[0].arrayBuffer();case 8:return e.t3=e.sent,e.t4=[e.t3],e.t5=new e.t2(e.t4),e.next=13,(0,e.t1)(e.t5);case 13:e.t6=e.sent,e.t7={bitmap:e.t6},(0,e.t0)(e.t7);case 16:return e.prev=16,i(t),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,,16,19]])})));return function(a){return e.apply(this,arguments)}}(),[Ue,l,i]),ca=Object(r.useCallback)(Object(b.a)(u.a.mark((function e(){var a,t,n,r,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>0&&void 0!==c[0]?c[0]:"image/png",t=!(c.length>1&&void 0!==c[1])||c[1],n=$e(),!window.Worker||!t){e.next=7;break}return e.abrupt("return",new Promise((function(e){var t=l(),r=function(){var t=Object(b.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,ca(a,!1);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();try{var c={type:"draw",data:n},o=new Worker("".concat("/WaterMarkerArray","/core.worker.js"));o.postMessage(c),o.onmessage=function(a){switch(a.data.type){case"then":e(a.data.data);break;case"catch":console.error("error in worker response:",a.data.data),r();break;case"finally":i(t)}}}catch(s){console.error("error on creating worker:",s),r()}})));case 7:return r=K(document.createElement("canvas"),n),e.abrupt("return",r.toDataURL(a,1));case 9:case"end":return e.stop()}}),e)}))),[$e,l,i]),la=Object(r.useCallback)(Object(b.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k.a,e.next=3,ca();case 3:e.t1=e.sent,e.t2={printable:e.t1,type:"image",style:"@media print { body { margin: 0; padding: 0; } }"},(0,e.t0)(e.t2);case 6:case"end":return e.stop()}}),e)}))),[ca]),ia=Object(r.useState)(),oa=Object(j.a)(ia,2),sa=oa[0],ua=oa[1],ba=Object(r.useCallback)((function(e){e.preventDefault(),s()||ua((function(a){return a?void 0:{left:e.clientX-2,top:e.clientY-4}}))}),[s]),ja=Object(r.useCallback)((function(){ua(void 0)}),[]),fa=Object(r.useCallback)((function(){la().then(),ja()}),[la,ja]),da=Object(r.useCallback)(Object(b.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=document.createElement("a")).target="_blank",a.download="".concat(ee.value||"image",".png"),e.next=5,ca("image/octet-stream");case 5:a.href=e.sent,a.click(),ja();case 8:case"end":return e.stop()}}),e)}))),[ee,ca,ja]);return Object(r.useEffect)((function(){ja()}),[c,ja]),Object(V.jsxs)("div",{className:"app-wrapper",children:[Object(V.jsxs)(f.a,{className:"paper form-wrapper ".concat(a("form.style.i18nClass")),children:[Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)(p.a,{variant:"standard",fullWidth:!0,children:[Object(V.jsx)(h.a,{id:"LanguageLabel",children:a("form.languageLabel")}),Object(V.jsx)(O.a,{labelId:"LanguageLabel",disabled:c,value:W,onChange:function(e){return N(e.target.value)},children:M.map((function(e){return Object(V.jsx)(m.a,{value:e.language,children:e.name},e.language)}))})]}),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)(p.a,{variant:"standard",fullWidth:!0,children:[Object(V.jsx)(h.a,{id:"PaperSizeLabel",children:a("form.paperSizeLabel")}),Object(V.jsx)(O.a,{labelId:"PaperSizeLabel",disabled:c,value:T,onChange:function(e){return D(e.target.value)},children:J.map((function(e){return Object(V.jsx)(m.a,{value:e.value,children:e.label},e.value)}))})]}),Object(V.jsxs)(p.a,{variant:"standard",fullWidth:!0,children:[Object(V.jsx)(h.a,{id:"PrecisionLabel",children:a("form.printQuality")}),Object(V.jsx)(O.a,{labelId:"PrecisionLabel",disabled:c,value:q,onChange:function(e){return _(e.target.value)},children:Q.map((function(e){return Object(V.jsx)(m.a,{value:e.value,children:e.label},e.value)}))})]})]}))]})),Object(V.jsx)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:Object(V.jsx)(g.a,{fullWidth:!0,label:a("form.waterMarkerText"),variant:"standard",disabled:c,value:$,onChange:function(e){return ae(e.target.value)}})})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsx)(g.a,{fullWidth:!0,label:a("form.font.familyLabel"),variant:"standard",value:se,disabled:c,onChange:function(e){return be(e.target.value)}}),Object(V.jsx)(g.a,{fullWidth:!0,type:"number",label:a("form.font.weightLabel"),variant:"standard",value:ge,disabled:c,onChange:function(e){return xe(e.target.value)}})]})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsx)(g.a,{fullWidth:!0,label:a("form.font.colorLabel"),variant:"standard",value:re,disabled:c,onChange:function(e){return le(e.target.value)}}),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)("div",{className:"form-item-name",children:[a("form.font.sizeLabel")," (mm):"]}),Object(V.jsx)(v.a,{"aria-label":a("form.font.sizeLabel"),valueLabelDisplay:"auto",min:2,disabled:c,value:de,onChange:function(e,a){return he(a)}})]}))]})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rowSpaceLabel")," (mm):"]}),Object(V.jsx)(v.a,{"aria-label":a("form.layout.rowSpaceLabel"),valueLabelDisplay:"auto",min:1,disabled:c,value:ye,onChange:function(e,a){return ke(a)}})]})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)("div",{className:"form-item-name",children:[a("form.layout.colSpaceLabel")," (mm):"]}),Object(V.jsx)(v.a,{"aria-label":a("form.layout.colSpaceLabel"),valueLabelDisplay:"auto",min:1,disabled:c,value:We,onChange:function(e,a){return Ne(a)}})]}))]})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rotateLabel")," (\xb0):"]}),Object(V.jsx)(v.a,{"aria-label":a("form.layout.rotateLabel"),valueLabelDisplay:"auto",min:0,max:360,disabled:c,value:Te,onChange:function(e,a){return De(a)}})]})),Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rowShiftLabel")," (mm):"]}),Object(V.jsx)(v.a,{"aria-label":a("form.layout.rowShiftLabel"),valueLabelDisplay:"auto",min:0,disabled:c,value:Ae,onChange:function(e,a){return Je(a)}})]}))]})),Object(V.jsx)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:Object(V.jsxs)(d.a,Object(o.a)(Object(o.a)({},Y),{},{children:[Object(V.jsx)(g.a,{fullWidth:!0,label:a("form.backgroundImage"),variant:"standard",InputLabelProps:{shrink:!0},type:"file",disabled:c,onChange:ra}),Object(V.jsx)(x.a,{disabled:c,onClick:la,children:a("form.print")})]}))})),Object(V.jsx)(w.a,{className:"progress-indicator",style:{opacity:c?1:0}})]}),Object(V.jsx)(f.a,{className:"canvas-container",id:X,onContextMenu:ba}),Object(V.jsxs)(L.a,{open:!!sa,onClose:ja,anchorReference:"anchorPosition",anchorPosition:sa,children:[Object(V.jsx)(m.a,{onClick:fa,children:a("form.print")}),Object(V.jsx)(m.a,{onClick:da,children:a("form.download")})]})]})}var G=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,173)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,c=a.getLCP,l=a.getTTFB;t(e),n(e),r(e),c(e),l(e)}))},Z=t(156);i.a.render(Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(Z.a,{i18n:A,children:Object(V.jsx)(_,{})})}),document.getElementById("root")),G()},66:function(e){e.exports=JSON.parse('{"title":"\u6c34\u5370\u9635\u5217","form":{"style":{"i18nClass":"i18n-zh i18n-zhCN"},"languageLabel":"Language","paperSizeLabel":"\u7eb8\u5f20\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5185\u5bb9","font":{"familyLabel":"\u5b57\u4f53\u7c7b\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u4f53\u989c\u8272","sizeLabel":"\u5b57\u4f53\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u95f4\u9694","colSpaceLabel":"\u5782\u76f4\u95f4\u9694","rotateLabel":"\u65cb\u8f6c\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u56fe\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f7d\u56fe\u7247"}}')},67:function(e){e.exports=JSON.parse('{"title":"\u6c34\u5370\u9663\u5217","form":{"style":{"i18nClass":"i18n-zh i18n-zhTW"},"languageLabel":"Language","paperSizeLabel":"\u7d19\u5f35\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5167\u5bb9","font":{"familyLabel":"\u5b57\u9ad4\u985e\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u9ad4\u984f\u8272","sizeLabel":"\u5b57\u9ad4\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u9593\u9694","colSpaceLabel":"\u5782\u76f4\u9593\u9694","rotateLabel":"\u65cb\u8f49\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u5716\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f09\u5716\u7247"}}')},82:function(e){e.exports=JSON.parse('{"title":"Water Marker Array","form":{"style":{"i18nClass":"i18n-en"},"languageLabel":"\u8bed\u8a00","paperSizeLabel":"Paper","printQuality":"Print Quality","waterMarkerText":"Text","font":{"familyLabel":"Font Family","weightLabel":"Font Weight","colorLabel":"Font Color","sizeLabel":"Font Size"},"layout":{"rowSpaceLabel":"Row Space","colSpaceLabel":"Col Space","rotateLabel":"Rotate","rowShiftLabel":"Row Shift"},"backgroundImage":"Image","print":"Print","download":"Save as Image"}}')}},[[116,1,2]]]);