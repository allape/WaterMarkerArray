(this["webpackJsonpwater-marker-array"]=this["webpackJsonpwater-marker-array"]||[]).push([[0],{100:function(e,a,t){},102:function(e,a,t){},114:function(e,a,t){"use strict";t.r(a);var n,l=t(0),r=t.n(l),c=t(34),i=t.n(c),o=(t(100),t(14)),b=t(36),u=t.n(b),s=t(46),j=t(9),f=(t(102),t(165)),h=t(166),O=t(159),d=t(160),m=t(156),g=t(157),p=t(161),v=t(158),x=t(169),L=t(86),w=t(17),S=t(78),y=t.n(S),C=t(16),k={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}},z=Object.keys(k).map((function(e){return{value:e,label:e}})),F=[{value:200,label:"200ppi"},{value:300,label:"300ppi"},{value:600,label:"600ppi"}],I=25.4,W=[{label:"-default-",value:"serif"}].concat(Object(C.a)(Array.from(new Set(Array.from(document.fonts).map((function(e){return e.family})))).map((function(e){return{label:e,value:e}})))),N=t(164),D=t(3),P=t(50),T=t(39),B=t(81),A=t(82),E=t(65),M=t(66),R={en:{name:"English",language:"en",resource:A},zh:{name:"\u4e2d\u6587",language:"zh",resource:E},"zh-CN":{name:"\u7b80\u4f53\u4e2d\u6587",language:"zh-CN",resource:E},"zh-TW":{name:"\u7e41\u9ad4\u4e2d\u6587(\u53f0\u7063)",language:"zh-TW",resource:M},"zh-HK":{name:"\u7e41\u9ad4\u4e2d\u6587(\u9999\u6e2f)",language:"zh-HK",resource:M}},J=null===(n=window.navigator)||void 0===n?void 0:n.language,Q=J&&Object.keys(R).includes(J)?J:R.en.language,U=Object.values(R);P.a.use(T.e).use(B.a).init({fallbackLng:R.en.language,interpolation:{escapeValue:!1},resources:Object.values(R).reduce((function(e,a){return Object(o.a)(Object(o.a)({},e),{},Object(D.a)({},a.language,{translation:a.resource}))}),{})}).then(Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.changeLanguage(Q);case 2:console.log("i18n:",P.a);case 3:case"end":return e.stop()}}),e)}))));var q=P.a,H=t(2),K="CanvasContainer",V=function(e,a){var t=e.getContext("2d"),n=k[a.paperSize],l=a.precision;e.width=n.width/I*l,e.height=n.height/I*l;var r=a.fontSize/I*l,c=a.rowSpace/I*l,i=a.colSpace/I*l,o=a.rowShift/I*l,b=2*Math.max(e.width,e.height),u=e.width/2,s=e.height/2,j=-b/2,f=-b/2;t.fillStyle="#ffffff",t.clearRect(j+u,f+s,b,b),a.image&&t.drawImage(a.image,0,0,e.width,e.height),t.translate(u,s),t.rotate(a.rotate*Math.PI/180),t.translate(j,f);var h=a.text;t.font="".concat(a.fontWeight||"normal"," ").concat(r,"px ").concat(a.fontFamily||"serif"),t.textBaseline="middle";var O=t.measureText(h),d=O.width,m=O.fontBoundingBoxAscent+O.fontBoundingBoxDescent;t.fillStyle=a.color;for(var g=0,p=0,v=0;p<=b;){if(g>b+o*v){var x=m+i;t.translate(-o,x),g=-o*v,p+=x,v++}t.fillText(h,g,0),g+=d+c}},X={className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center"};function Y(){var e=Object(N.a)(),a=e.t,t=e.i18n,n=Object(l.useState)(Q),r=Object(j.a)(n,2),c=r[0],i=r[1],b=Object(l.useCallback)(function(){var e=Object(s.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.changeLanguage(a);case 2:i(a);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[t]);Object(l.useEffect)((function(){window.document.title=a("title")}),[a,t.language]);var S=Object(w.b)(z[1].value),C=Object(j.a)(S,4),k=C[0],I=C[2],D=C[3],P=Object(w.b)(F[1].value),T=Object(j.a)(P,4),B=T[0],A=T[2],E=T[3],M=Object(w.b)((new Date).toLocaleDateString()),R=Object(j.a)(M,4),J=R[0],q=R[2],Y=R[3],_=Object(w.b)("rgba(0, 0, 0, 0.1)"),G=Object(j.a)(_,4),Z=G[0],$=G[2],ee=G[3],ae=Object(w.b)(W[0].value),te=Object(j.a)(ae,4),ne=te[0],le=te[2],re=te[3],ce=Object(w.b)(6),ie=Object(j.a)(ce,4),oe=ie[0],be=ie[2],ue=ie[3],se=Object(w.b)("400"),je=Object(j.a)(se,4),fe=je[0],he=je[2],Oe=je[3],de=Object(w.b)(10),me=Object(j.a)(de,4),ge=me[0],pe=me[2],ve=me[3],xe=Object(w.b)(10),Le=Object(j.a)(xe,4),we=Le[0],Se=Le[2],ye=Le[3],Ce=Object(w.b)(315),ke=Object(j.a)(Ce,4),ze=ke[0],Fe=ke[2],Ie=ke[3],We=Object(w.b)(10),Ne=Object(j.a)(We,4),De=Ne[0],Pe=Ne[2],Te=Ne[3],Be=Object(w.b)(),Ae=Object(j.a)(Be,4),Ee=Ae[0],Me=Ae[2],Re=Ae[3],Je=Object(w.a)(void 0),Qe=Object(j.a)(Je,1)[0],Ue=Object(w.a)(!1),qe=Object(j.a)(Ue,1)[0],He=Object(w.a)(!1),Ke=Object(j.a)(He,1)[0],Ve=Object(l.useCallback)((function(){return{paperSize:I.value,precision:A.value,text:q.value,color:$.value,fontFamily:le.value,fontSize:be.value,fontWeight:he.value,rowSpace:pe.value,colSpace:Se.value,rotate:Fe.value,rowShift:Pe.value,image:Me.value}}),[I,A,q,$,le,be,he,pe,Se,Fe,Pe,Me]),Xe=Object(w.a)({paperSize:"",precision:-1,text:"",color:"",fontFamily:"",fontSize:-1,fontWeight:"",rowSpace:-1,colSpace:-1,rotate:-1,rowShift:-1}),Ye=Object(j.a)(Xe,1)[0],_e=Object(l.useCallback)((function(e){var a=Ye.value,t=Object(o.a)(Object(o.a)({},Ve()),e);return a.paperSize!==t.paperSize||a.precision!==t.precision||a.text!==t.text||a.color!==t.color||a.fontFamily!==t.fontFamily||a.fontSize!==t.fontSize||a.fontWeight!==t.fontWeight||a.rowSpace!==t.rowSpace||a.colSpace!==t.colSpace||a.rotate!==t.rotate||a.rowShift!==t.rowShift}),[Ye,Ve]),Ge=Object(l.useCallback)(Object(s.a)(u.a.mark((function e(){var a,t,n,l,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ke.value){e.next=2;break}return e.abrupt("return");case 2:if(a=!1,e.prev=3,qe.value=!0,console.log("render at",(new Date).toLocaleTimeString()),Qe.value){e.next=19;break}if(!(t=document.getElementById(K))){e.next=14;break}Qe.value=document.createElement("canvas"),Qe.value.style.width="100%",t.append(Qe.value),e.next=17;break;case 14:return a=!0,requestAnimationFrame(Ge),e.abrupt("return");case 17:e.next=25;break;case 19:n=Qe.value,l={precision:100},r=Object(o.a)(Object(o.a)({},Ve()),l),V(n,r),Ye.value=r,_e(l)&&(a=!0,requestAnimationFrame(Ge));case 25:return e.prev=25,qe.value=a,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,,25,28]])}))),[Ke,qe,Qe,Ye,_e,Ve]);Object(l.useEffect)((function(){return Ge().then(),function(){Ke.value=!0}}),[Ge,Ke]),Object(l.useEffect)((function(){qe.value||Ge().then()}),[Ge,qe,k,B,J,Z,ne,oe,fe,ge,we,ze,De,Ee]);var Ze=Object(l.useCallback)((function(e){if(e.target.files&&e.target.files.length>0){var a=new Image;a.onload=function(){Re(a)},a.src=URL.createObjectURL(e.target.files[0])}}),[Re]),$e=Object(l.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",a=document.createElement("canvas");return V(a,Ve()),a.toDataURL(e,1)}),[Ve]),ea=Object(l.useCallback)((function(){y()($e(),"image")}),[$e]),aa=Object(l.useState)(),ta=Object(j.a)(aa,2),na=ta[0],la=ta[1],ra=Object(l.useCallback)((function(e){e.preventDefault(),la((function(a){return a?void 0:{left:e.clientX-2,top:e.clientY-4}}))}),[]),ca=Object(l.useCallback)((function(){la(void 0)}),[]),ia=Object(l.useCallback)((function(){ea(),ca()}),[ea,ca]),oa=Object(l.useCallback)((function(){var e=document.createElement("a");e.target="_blank",e.download="".concat(q.value||"image",".png"),e.href=$e("image/octet-stream"),e.click(),ca()}),[q,$e,ca]);return Object(H.jsxs)("div",{className:"app-wrapper",children:[Object(H.jsxs)(f.a,{className:"paper form-wrapper ".concat(a("form.style.i18nClass")),children:[Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)(O.a,{variant:"standard",fullWidth:!0,children:[Object(H.jsx)(d.a,{id:"LanguageLabel",children:a("form.languageLabel")}),Object(H.jsx)(m.a,{labelId:"LanguageLabel",value:c,onChange:function(e){return b(e.target.value)},children:U.map((function(e){return Object(H.jsx)(g.a,{value:e.language,children:e.name},e.language)}))})]}),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)(O.a,{variant:"standard",fullWidth:!0,children:[Object(H.jsx)(d.a,{id:"PaperSizeLabel",children:a("form.paperSizeLabel")}),Object(H.jsx)(m.a,{labelId:"PaperSizeLabel",value:k,onChange:function(e){return D(e.target.value)},children:z.map((function(e){return Object(H.jsx)(g.a,{value:e.value,children:e.label},e.value)}))})]}),Object(H.jsxs)(O.a,{variant:"standard",fullWidth:!0,children:[Object(H.jsx)(d.a,{id:"PrecisionLabel",children:a("form.printQuality")}),Object(H.jsx)(m.a,{labelId:"PrecisionLabel",value:B,onChange:function(e){return E(e.target.value)},children:F.map((function(e){return Object(H.jsx)(g.a,{value:e.value,children:e.label},e.value)}))})]})]}))]})),Object(H.jsx)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:Object(H.jsx)(p.a,{fullWidth:!0,label:a("form.waterMarkerText"),variant:"standard",value:J,onChange:function(e){return Y(e.target.value)}})})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)(O.a,{variant:"standard",fullWidth:!0,children:[Object(H.jsxs)(d.a,{id:"FontFamilyLabel",children:[a("form.font.familyLabel"),":"]}),Object(H.jsx)(m.a,{labelId:"FontFamilyLabel",value:ne,onChange:function(e){return re(e.target.value)},children:W.map((function(e){return Object(H.jsx)(g.a,{value:e.value,children:e.label},e.label)}))})]}),Object(H.jsx)(p.a,{fullWidth:!0,label:a("form.font.weightLabel"),variant:"standard",value:fe,onChange:function(e){return Oe(e.target.value)}})]})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsx)(p.a,{fullWidth:!0,label:a("form.font.colorLabel"),variant:"standard",value:Z,onChange:function(e){return ee(e.target.value)}}),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)("div",{className:"form-item-name",children:[a("form.font.sizeLabel")," (mm):"]}),Object(H.jsx)(v.a,{"aria-label":a("form.font.sizeLabel"),valueLabelDisplay:"auto",min:2,value:oe,onChange:function(e,a){return ue(a)}})]}))]})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rowSpaceLabel")," (mm):"]}),Object(H.jsx)(v.a,{"aria-label":a("form.layout.rowSpaceLabel"),valueLabelDisplay:"auto",min:1,value:ge,onChange:function(e,a){return ve(a)}})]})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)("div",{className:"form-item-name",children:[a("form.layout.colSpaceLabel")," (mm):"]}),Object(H.jsx)(v.a,{"aria-label":a("form.layout.colSpaceLabel"),valueLabelDisplay:"auto",min:1,value:we,onChange:function(e,a){return ye(a)}})]}))]})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rotateLabel")," (\xb0):"]}),Object(H.jsx)(v.a,{"aria-label":a("form.layout.rotateLabel"),valueLabelDisplay:"auto",min:0,max:360,value:ze,onChange:function(e,a){return Ie(a)}})]})),Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsxs)("div",{className:"form-item-name",children:[a("form.layout.rowShiftLabel")," (mm):"]}),Object(H.jsx)(v.a,{"aria-label":a("form.layout.rowShiftLabel"),valueLabelDisplay:"auto",min:0,value:De,onChange:function(e,a){return Te(a)}})]}))]})),Object(H.jsx)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:Object(H.jsxs)(h.a,Object(o.a)(Object(o.a)({},X),{},{children:[Object(H.jsx)(p.a,{fullWidth:!0,label:a("form.backgroundImage"),variant:"standard",InputLabelProps:{shrink:!0},type:"file",onChange:Ze}),Object(H.jsx)(x.a,{onClick:ea,children:a("form.print")})]}))}))]}),Object(H.jsx)(f.a,{className:"canvas-container",id:K,onContextMenu:ra}),Object(H.jsxs)(L.a,{open:!!na,onClose:ca,anchorReference:"anchorPosition",anchorPosition:na,children:[Object(H.jsx)(g.a,{onClick:ia,children:a("form.print")}),Object(H.jsx)(g.a,{onClick:oa,children:a("form.download")})]})]})}var _=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,170)).then((function(a){var t=a.getCLS,n=a.getFID,l=a.getFCP,r=a.getLCP,c=a.getTTFB;t(e),n(e),l(e),r(e),c(e)}))},G=t(154);i.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(G.a,{i18n:q,children:Object(H.jsx)(Y,{})})}),document.getElementById("root")),_()},65:function(e){e.exports=JSON.parse('{"title":"\u6c34\u5370\u9635\u5217","form":{"style":{"i18nClass":"i18n-zh i18n-zhCN"},"languageLabel":"Language","paperSizeLabel":"\u7eb8\u5f20\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5185\u5bb9","font":{"familyLabel":"\u5b57\u4f53\u7c7b\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u4f53\u989c\u8272","sizeLabel":"\u5b57\u4f53\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u95f4\u9694","colSpaceLabel":"\u5782\u76f4\u95f4\u9694","rotateLabel":"\u65cb\u8f6c\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u56fe\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f7d\u56fe\u7247"}}')},66:function(e){e.exports=JSON.parse('{"title":"\u6c34\u5370\u9663\u5217","form":{"style":{"i18nClass":"i18n-zh i18n-zhTW"},"languageLabel":"Language","paperSizeLabel":"\u7d19\u5f35\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5167\u5bb9","font":{"familyLabel":"\u5b57\u9ad4\u985e\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u9ad4\u984f\u8272","sizeLabel":"\u5b57\u9ad4\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u9593\u9694","colSpaceLabel":"\u5782\u76f4\u9593\u9694","rotateLabel":"\u65cb\u8f49\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u5716\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f09\u5716\u7247"}}')},82:function(e){e.exports=JSON.parse('{"title":"Water Marker Array","form":{"style":{"i18nClass":"i18n-en"},"languageLabel":"\u8bed\u8a00","paperSizeLabel":"Paper","printQuality":"Print Quality","waterMarkerText":"Text","font":{"familyLabel":"Font Family","weightLabel":"Font Weight","colorLabel":"Font Color","sizeLabel":"Font Size"},"layout":{"rowSpaceLabel":"Row Space","colSpaceLabel":"Col Space","rotateLabel":"Rotate","rowShiftLabel":"Row Shift"},"backgroundImage":"Image","print":"Print","download":"Download Image"}}')}},[[114,1,2]]]);