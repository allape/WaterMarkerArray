(this["webpackJsonpwater-marker-array"]=this["webpackJsonpwater-marker-array"]||[]).push([[0],{84:function(e,a,t){},86:function(e,a,t){},93:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(31),c=t.n(i),l=(t(84),t(57)),s=t.n(l),o=t(65),u=t(43),b=t(9),j=(t(86),t(142)),d=t(143),h=t(137),p=t(138),v=t(133),f=t(135),m=t(139),O=t(136),g=t(146),x=t(16),w=t(68),S=t.n(w),y=t(15),C={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}},I=Object.keys(C).map((function(e){return{value:e,label:e}})),N=[{value:200,label:"200ppi"},{value:300,label:"300ppi"},{value:600,label:"600ppi"}],L=25.4,k=[{label:"-default-",value:"serif"}].concat(Object(y.a)(Array.from(new Set(Array.from(document.fonts).map((function(e){return e.family})))).map((function(e){return{label:e,value:e}})))),F=t(2),z="CanvasContainer",W=function(e,a){var t=e.getContext("2d"),n=C[a.paperSize],r=a.precision;e.width=n.width/L*r,e.height=n.height/L*r;var i=a.fontSize/L*r,c=a.rowSpace/L*r,l=a.colSpace/L*r,s=a.rowShift/L*r,o=2*Math.max(e.width,e.height),u=e.width/2,b=e.height/2,j=-o/2,d=-o/2;t.fillStyle="#ffffff",t.clearRect(j+u,d+b,o,o),a.image&&t.drawImage(a.image,0,0,e.width,e.height),t.translate(u,b),t.rotate(a.rotate*Math.PI/180),t.translate(j,d);var h=a.text;t.font="".concat(a.fontWeight||"normal"," ").concat(i,"px ").concat(a.fontFamily||"serif"),t.textBaseline="middle";var p=t.measureText(h),v=p.width,f=p.fontBoundingBoxAscent+p.fontBoundingBoxDescent;t.fillStyle=a.color;for(var m=0,O=0,g=0;O<=o;){if(m>o+s*g){var x=f+l;t.translate(-s,x),m=-s*g,O+=x,g++}t.fillText(h,m,0),m+=v+c}};function D(){var e=Object(x.b)(I[1].value),a=Object(b.a)(e,4),t=a[0],r=a[2],i=a[3],c=Object(x.b)(N[1].value),l=Object(b.a)(c,4),w=l[0],y=l[2],D=l[3],B=Object(x.b)((new Date).toLocaleDateString()),A=Object(b.a)(B,4),P=A[0],E=A[2],T=A[3],R=Object(x.b)("rgba(0, 0, 0, 0.1)"),M=Object(b.a)(R,4),U=M[0],q=M[2],J=M[3],G=Object(x.b)(k[0].value),H=Object(b.a)(G,4),K=H[0],Q=H[2],V=H[3],X=Object(x.b)(6),Y=Object(b.a)(X,4),Z=Y[0],$=Y[2],_=Y[3],ee=Object(x.b)("400"),ae=Object(b.a)(ee,4),te=ae[0],ne=ae[2],re=ae[3],ie=Object(x.b)(10),ce=Object(b.a)(ie,4),le=ce[0],se=ce[2],oe=ce[3],ue=Object(x.b)(10),be=Object(b.a)(ue,4),je=be[0],de=be[2],he=be[3],pe=Object(x.b)(315),ve=Object(b.a)(pe,4),fe=ve[0],me=ve[2],Oe=ve[3],ge=Object(x.b)(10),xe=Object(b.a)(ge,4),we=xe[0],Se=xe[2],ye=xe[3],Ce=Object(x.b)(),Ie=Object(b.a)(Ce,4),Ne=Ie[0],Le=Ie[2],ke=Ie[3],Fe=Object(x.a)(void 0),ze=Object(b.a)(Fe,1)[0],We=Object(x.a)(!1),De=Object(b.a)(We,1)[0],Be=Object(x.a)(!1),Ae=Object(b.a)(Be,1)[0],Pe=Object(n.useCallback)((function(){return{paperSize:r.value,precision:y.value,text:E.value,color:q.value,fontFamily:Q.value,fontSize:$.value,fontWeight:ne.value,rowSpace:se.value,colSpace:de.value,rotate:me.value,rowShift:Se.value,image:Le.value}}),[r,y,E,q,Q,$,ne,se,de,me,Se,Le]),Ee=Object(x.a)({paperSize:"",precision:-1,text:"",color:"",fontFamily:"",fontSize:-1,fontWeight:"",rowSpace:-1,colSpace:-1,rotate:-1,rowShift:-1}),Te=Object(b.a)(Ee,1)[0],Re=Object(n.useCallback)((function(e){var a=Te.value,t=Object(u.a)(Object(u.a)({},Pe()),e);return a.paperSize!==t.paperSize||a.precision!==t.precision||a.text!==t.text||a.color!==t.color||a.fontFamily!==t.fontFamily||a.fontSize!==t.fontSize||a.fontWeight!==t.fontWeight||a.rowSpace!==t.rowSpace||a.colSpace!==t.colSpace||a.rotate!==t.rotate||a.rowShift!==t.rowShift}),[Te,Pe]),Me=Object(n.useCallback)(Object(o.a)(s.a.mark((function e(){var a,t,n,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ae.value){e.next=2;break}return e.abrupt("return");case 2:if(a=!1,e.prev=3,De.value=!0,console.log("render at",(new Date).toLocaleTimeString()),ze.value){e.next=19;break}if(!(t=document.getElementById(z))){e.next=14;break}ze.value=document.createElement("canvas"),ze.value.style.width="100%",t.append(ze.value),e.next=17;break;case 14:return a=!0,requestAnimationFrame(Me),e.abrupt("return");case 17:e.next=25;break;case 19:n=ze.value,r={precision:100},i=Object(u.a)(Object(u.a)({},Pe()),r),W(n,i),Te.value=i,Re(r)&&(a=!0,requestAnimationFrame(Me));case 25:return e.prev=25,De.value=a,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,,25,28]])}))),[Ae,De,ze,Te,Re,Pe]);Object(n.useEffect)((function(){return Me().then(),function(){Ae.value=!0}}),[Me,Ae]),Object(n.useEffect)((function(){De.value||Me().then()}),[Me,De,t,w,P,U,K,Z,te,le,je,fe,we,Ne]);var Ue=Object(n.useCallback)((function(e){if(e.target.files&&e.target.files.length>0){var a=new Image;a.onload=function(){ke(a)},a.src=URL.createObjectURL(e.target.files[0])}}),[ke]),qe=Object(n.useCallback)((function(){var e=document.createElement("canvas"),a=Pe(),t=C[a.paperSize];e.width=t.width/L*a.precision,e.height=t.height/L*a.precision,W(e,a),S()(e.toDataURL("image/png",1),"image")}),[Pe]);return Object(F.jsxs)("div",{className:"app-wrapper",children:[Object(F.jsxs)(j.a,{className:"paper",children:[Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsxs)(h.a,{variant:"standard",fullWidth:!0,children:[Object(F.jsx)(p.a,{id:"PaperSizeLabel",children:"\u7eb8\u5f20\u5927\u5c0f"}),Object(F.jsx)(v.a,{labelId:"PaperSizeLabel",value:t,onChange:function(e){return i(e.target.value)},children:I.map((function(e){return Object(F.jsx)(f.a,{value:e.value,children:e.label},e.value)}))})]}),Object(F.jsxs)(h.a,{variant:"standard",fullWidth:!0,children:[Object(F.jsx)(p.a,{id:"PrecisionLabel",children:"\u6253\u5370\u7cbe\u5ea6"}),Object(F.jsx)(v.a,{labelId:"PrecisionLabel",value:w,onChange:function(e){return D(e.target.value)},children:N.map((function(e){return Object(F.jsx)(f.a,{value:e.value,children:e.label},e.value)}))})]})]}),Object(F.jsx)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(F.jsx)(m.a,{fullWidth:!0,label:"\u6c34\u5370\u5185\u5bb9",variant:"standard",value:P,onChange:function(e){return T(e.target.value)}})}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsxs)(h.a,{variant:"standard",fullWidth:!0,children:[Object(F.jsx)(p.a,{id:"FontFamilyLabel",children:"\u5b57\u4f53\u7c7b\u578b:"}),Object(F.jsx)(v.a,{labelId:"FontFamilyLabel",value:K,onChange:function(e){return V(e.target.value)},children:k.map((function(e){return Object(F.jsx)(f.a,{value:e.value,children:e.label},e.label)}))})]}),Object(F.jsx)(m.a,{fullWidth:!0,label:"\u5b57\u91cd",variant:"standard",value:te,onChange:function(e){return re(e.target.value)}})]}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)(m.a,{fullWidth:!0,label:"\u5b57\u4f53\u989c\u8272",variant:"standard",value:U,onChange:function(e){return J(e.target.value)}}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)("div",{className:"slider-name",children:"\u5b57\u4f53\u5927\u5c0f(mm):"}),Object(F.jsx)(O.a,{"aria-label":"\u5b57\u4f53\u5927\u5c0f",valueLabelDisplay:"auto",min:2,value:Z,onChange:function(e,a){return _(a)}})]})]}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)("div",{className:"slider-name",children:"\u6c34\u5e73\u95f4\u9694(mm):"}),Object(F.jsx)(O.a,{"aria-label":"\u6c34\u5e73\u95f4\u9694",valueLabelDisplay:"auto",min:1,value:le,onChange:function(e,a){return oe(a)}})]}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)("div",{className:"slider-name",children:"\u5782\u76f4\u95f4\u9694(mm):"}),Object(F.jsx)(O.a,{"aria-label":"\u5782\u76f4\u95f4\u9694",valueLabelDisplay:"auto",min:1,value:je,onChange:function(e,a){return he(a)}})]})]}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)("div",{className:"slider-name",children:"\u65cb\u8f6c\u89d2\u5ea6(\xb0):"}),Object(F.jsx)(O.a,{"aria-label":"\u65cb\u8f6c\u89d2\u5ea6",valueLabelDisplay:"auto",min:0,max:360,value:fe,onChange:function(e,a){return Oe(a)}})]}),Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)("div",{className:"slider-name",children:"\u6c34\u5e73\u504f\u79fb(mm):"}),Object(F.jsx)(O.a,{"aria-label":"\u6c34\u5e73\u504f\u79fb",valueLabelDisplay:"auto",min:1,value:we,onChange:function(e,a){return ye(a)}})]})]}),Object(F.jsx)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(F.jsxs)(d.a,{className:"slider-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(F.jsx)(m.a,{fullWidth:!0,label:"\u80cc\u666f\u56fe\u7247",variant:"standard",InputLabelProps:{shrink:!0},type:"file",onChange:Ue}),Object(F.jsx)(g.a,{onClick:qe,children:"\u6253\u5370"})]})})]}),Object(F.jsx)(j.a,{className:"canvas-container",id:z})]})}var B=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,147)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,i=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),i(e),c(e)}))};c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(D,{})}),document.getElementById("root")),B()}},[[93,1,2]]]);