(this["webpackJsonpwater-marker-array"]=this["webpackJsonpwater-marker-array"]||[]).push([[0],{101:function(e,a,t){},113:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(33),c=t.n(l),i=(t(99),t(63)),o=t.n(i),s=t(74),b=t(47),u=t(9),m=(t(101),t(164)),f=t(165),j=t(158),p=t(159),d=t(155),h=t(156),v=t(160),O=t(157),g=t(168),w=t(85),x=t(16),S=t(77),L=t.n(S),y=t(15),C={A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}},k=Object.keys(C).map((function(e){return{value:e,label:e}})),I=[{value:200,label:"200ppi"},{value:300,label:"300ppi"},{value:600,label:"600ppi"}],N=25.4,z=[{label:"-default-",value:"serif"}].concat(Object(y.a)(Array.from(new Set(Array.from(document.fonts).map((function(e){return e.family})))).map((function(e){return{label:e,value:e}})))),F=t(163),D=t(2),P="CanvasContainer",W=function(e,a){var t=e.getContext("2d"),n=C[a.paperSize],r=a.precision;e.width=n.width/N*r,e.height=n.height/N*r;var l=a.fontSize/N*r,c=a.rowSpace/N*r,i=a.colSpace/N*r,o=a.rowShift/N*r,s=2*Math.max(e.width,e.height),b=e.width/2,u=e.height/2,m=-s/2,f=-s/2;t.fillStyle="#ffffff",t.clearRect(m+b,f+u,s,s),a.image&&t.drawImage(a.image,0,0,e.width,e.height),t.translate(b,u),t.rotate(a.rotate*Math.PI/180),t.translate(m,f);var j=a.text;t.font="".concat(a.fontWeight||"normal"," ").concat(l,"px ").concat(a.fontFamily||"serif"),t.textBaseline="middle";var p=t.measureText(j),d=p.width,h=p.fontBoundingBoxAscent+p.fontBoundingBoxDescent;t.fillStyle=a.color;for(var v=0,O=0,g=0;O<=s;){if(v>s+o*g){var w=h+i;t.translate(-o,w),v=-o*g,O+=w,g++}t.fillText(j,v,0),v+=d+c}};function B(){var e=Object(F.a)().t,a=Object(x.b)(k[1].value),t=Object(u.a)(a,4),r=t[0],l=t[2],c=t[3],i=Object(x.b)(I[1].value),S=Object(u.a)(i,4),y=S[0],C=S[2],N=S[3],B=Object(x.b)((new Date).toLocaleDateString()),T=Object(u.a)(B,4),A=T[0],R=T[2],E=T[3],M=Object(x.b)("rgba(0, 0, 0, 0.1)"),J=Object(u.a)(M,4),Q=J[0],U=J[2],q=J[3],V=Object(x.b)(z[0].value),X=Object(u.a)(V,4),Y=X[0],_=X[2],G=X[3],H=Object(x.b)(6),K=Object(u.a)(H,4),Z=K[0],$=K[2],ee=K[3],ae=Object(x.b)("400"),te=Object(u.a)(ae,4),ne=te[0],re=te[2],le=te[3],ce=Object(x.b)(10),ie=Object(u.a)(ce,4),oe=ie[0],se=ie[2],be=ie[3],ue=Object(x.b)(10),me=Object(u.a)(ue,4),fe=me[0],je=me[2],pe=me[3],de=Object(x.b)(315),he=Object(u.a)(de,4),ve=he[0],Oe=he[2],ge=he[3],we=Object(x.b)(10),xe=Object(u.a)(we,4),Se=xe[0],Le=xe[2],ye=xe[3],Ce=Object(x.b)(),ke=Object(u.a)(Ce,4),Ie=ke[0],Ne=ke[2],ze=ke[3],Fe=Object(x.a)(void 0),De=Object(u.a)(Fe,1)[0],Pe=Object(x.a)(!1),We=Object(u.a)(Pe,1)[0],Be=Object(x.a)(!1),Te=Object(u.a)(Be,1)[0],Ae=Object(n.useCallback)((function(){return{paperSize:l.value,precision:C.value,text:R.value,color:U.value,fontFamily:_.value,fontSize:$.value,fontWeight:re.value,rowSpace:se.value,colSpace:je.value,rotate:Oe.value,rowShift:Le.value,image:Ne.value}}),[l,C,R,U,_,$,re,se,je,Oe,Le,Ne]),Re=Object(x.a)({paperSize:"",precision:-1,text:"",color:"",fontFamily:"",fontSize:-1,fontWeight:"",rowSpace:-1,colSpace:-1,rotate:-1,rowShift:-1}),Ee=Object(u.a)(Re,1)[0],Me=Object(n.useCallback)((function(e){var a=Ee.value,t=Object(b.a)(Object(b.a)({},Ae()),e);return a.paperSize!==t.paperSize||a.precision!==t.precision||a.text!==t.text||a.color!==t.color||a.fontFamily!==t.fontFamily||a.fontSize!==t.fontSize||a.fontWeight!==t.fontWeight||a.rowSpace!==t.rowSpace||a.colSpace!==t.colSpace||a.rotate!==t.rotate||a.rowShift!==t.rowShift}),[Ee,Ae]),Je=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var a,t,n,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Te.value){e.next=2;break}return e.abrupt("return");case 2:if(a=!1,e.prev=3,We.value=!0,console.log("render at",(new Date).toLocaleTimeString()),De.value){e.next=19;break}if(!(t=document.getElementById(P))){e.next=14;break}De.value=document.createElement("canvas"),De.value.style.width="100%",t.append(De.value),e.next=17;break;case 14:return a=!0,requestAnimationFrame(Je),e.abrupt("return");case 17:e.next=25;break;case 19:n=De.value,r={precision:100},l=Object(b.a)(Object(b.a)({},Ae()),r),W(n,l),Ee.value=l,Me(r)&&(a=!0,requestAnimationFrame(Je));case 25:return e.prev=25,We.value=a,e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,,25,28]])}))),[Te,We,De,Ee,Me,Ae]);Object(n.useEffect)((function(){return Je().then(),function(){Te.value=!0}}),[Je,Te]),Object(n.useEffect)((function(){We.value||Je().then()}),[Je,We,r,y,A,Q,Y,Z,ne,oe,fe,ve,Se,Ie]);var Qe=Object(n.useCallback)((function(e){if(e.target.files&&e.target.files.length>0){var a=new Image;a.onload=function(){ze(a)},a.src=URL.createObjectURL(e.target.files[0])}}),[ze]),Ue=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",a=document.createElement("canvas");return W(a,Ae()),a.toDataURL(e,1)}),[Ae]),qe=Object(n.useCallback)((function(){L()(Ue(),"image")}),[Ue]),Ve=Object(n.useState)(),Xe=Object(u.a)(Ve,2),Ye=Xe[0],_e=Xe[1],Ge=Object(n.useCallback)((function(e){e.preventDefault(),_e((function(a){return a?void 0:{left:e.clientX-2,top:e.clientY-4}}))}),[]),He=Object(n.useCallback)((function(){_e(void 0)}),[]),Ke=Object(n.useCallback)((function(){qe(),He()}),[qe,He]),Ze=Object(n.useCallback)((function(){var e=document.createElement("a");e.target="_blank",e.download="".concat(R.value||"image",".png"),e.href=Ue("image/octet-stream"),e.click(),He()}),[R,Ue,He]);return Object(D.jsxs)("div",{className:"app-wrapper",children:[Object(D.jsxs)(m.a,{className:"paper form-wrapper ".concat(e("form.style.i18nClass")),children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(p.a,{id:"PaperSizeLabel",children:e("form.paperSizeLabel")}),Object(D.jsx)(d.a,{labelId:"PaperSizeLabel",value:r,onChange:function(e){return c(e.target.value)},children:k.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.value)}))})]}),Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsx)(p.a,{id:"PrecisionLabel",children:e("form.printQuality")}),Object(D.jsx)(d.a,{labelId:"PrecisionLabel",value:y,onChange:function(e){return N(e.target.value)},children:I.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.value)}))})]})]}),Object(D.jsx)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(D.jsx)(v.a,{fullWidth:!0,label:e("form.waterMarkerText"),variant:"standard",value:A,onChange:function(e){return E(e.target.value)}})}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(j.a,{variant:"standard",fullWidth:!0,children:[Object(D.jsxs)(p.a,{id:"FontFamilyLabel",children:[e("form.font.familyLabel"),":"]}),Object(D.jsx)(d.a,{labelId:"FontFamilyLabel",value:Y,onChange:function(e){return G(e.target.value)},children:z.map((function(e){return Object(D.jsx)(h.a,{value:e.value,children:e.label},e.label)}))})]}),Object(D.jsx)(v.a,{fullWidth:!0,label:e("form.font.weightLabel"),variant:"standard",value:ne,onChange:function(e){return le(e.target.value)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsx)(v.a,{fullWidth:!0,label:e("form.font.colorLabel"),variant:"standard",value:Q,onChange:function(e){return q(e.target.value)}}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.font.sizeLabel")," (mm):"]}),Object(D.jsx)(O.a,{"aria-label":e("form.font.sizeLabel"),valueLabelDisplay:"auto",min:2,value:Z,onChange:function(e,a){return ee(a)}})]})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rowSpaceLabel")," (mm):"]}),Object(D.jsx)(O.a,{"aria-label":e("form.layout.rowSpaceLabel"),valueLabelDisplay:"auto",min:1,value:oe,onChange:function(e,a){return be(a)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.colSpaceLabel")," (mm):"]}),Object(D.jsx)(O.a,{"aria-label":e("form.layout.colSpaceLabel"),valueLabelDisplay:"auto",min:1,value:fe,onChange:function(e,a){return pe(a)}})]})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rotateLabel")," (\xb0):"]}),Object(D.jsx)(O.a,{"aria-label":e("form.layout.rotateLabel"),valueLabelDisplay:"auto",min:0,max:360,value:ve,onChange:function(e,a){return ge(a)}})]}),Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsxs)("div",{className:"form-item-name",children:[e("form.layout.rowShiftLabel")," (mm):"]}),Object(D.jsx)(O.a,{"aria-label":e("form.layout.rowShiftLabel"),valueLabelDisplay:"auto",min:0,value:Se,onChange:function(e,a){return ye(a)}})]})]}),Object(D.jsx)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:Object(D.jsxs)(f.a,{className:"form-item-wrapper",spacing:2,direction:"row",alignItems:"center",children:[Object(D.jsx)(v.a,{fullWidth:!0,label:e("form.backgroundImage"),variant:"standard",InputLabelProps:{shrink:!0},type:"file",onChange:Qe}),Object(D.jsx)(g.a,{onClick:qe,children:e("form.print")})]})})]}),Object(D.jsx)(m.a,{className:"canvas-container",id:P,onContextMenu:Ge}),Object(D.jsxs)(w.a,{open:!!Ye,onClose:He,anchorReference:"anchorPosition",anchorPosition:Ye,children:[Object(D.jsx)(h.a,{onClick:Ke,children:e("form.print")}),Object(D.jsx)(h.a,{onClick:Ze,children:e("form.download")})]})]})}var T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,169)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,l=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),l(e),c(e)}))},A=t(55),R=t(37),E=t(83),M=t(84),J=t(67),Q={en:{translation:M},zh:{translation:J},"zh-CN":{translation:J}};A.a.use(R.e).use(E.a).init({fallbackLng:"en",interpolation:{escapeValue:!1},resources:Q}).then(),console.log("i18n:",A.a);var U=A.a,q=t(153);c.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(q.a,{i18n:U,children:Object(D.jsx)(B,{})})}),document.getElementById("root")),T()},67:function(e){e.exports=JSON.parse('{"form":{"style":{"i18nClass":"i18n-zhCN"},"paperSizeLabel":"\u7eb8\u5f20\u5927\u5c0f","printQuality":"\u6253\u5370\u7cbe\u5ea6","waterMarkerText":"\u6c34\u5370\u5185\u5bb9","font":{"familyLabel":"\u5b57\u4f53\u7c7b\u578b","weightLabel":"\u5b57\u91cd","colorLabel":"\u5b57\u4f53\u989c\u8272","sizeLabel":"\u5b57\u4f53\u5927\u5c0f"},"layout":{"rowSpaceLabel":"\u6c34\u5e73\u95f4\u9694","colSpaceLabel":"\u5782\u76f4\u95f4\u9694","rotateLabel":"\u65cb\u8f6c\u89d2\u5ea6","rowShiftLabel":"\u6c34\u5e73\u504f\u79fb"},"backgroundImage":"\u80cc\u666f\u56fe\u7247","print":"\u6253\u5370","download":"\u4e0b\u8f7d\u56fe\u7247"}}')},84:function(e){e.exports=JSON.parse('{"form":{"style":{"i18nClass":"i18n-en"},"paperSizeLabel":"Paper","printQuality":"Print Quality","waterMarkerText":"Text","font":{"familyLabel":"Font Family","weightLabel":"Font Weight","colorLabel":"Font Color","sizeLabel":"Font Size"},"layout":{"rowSpaceLabel":"Row Space","colSpaceLabel":"Col Space","rotateLabel":"Rotate","rowShiftLabel":"Row Shift"},"backgroundImage":"Image","print":"Print","download":"Download Image"}}')},99:function(e,a,t){}},[[113,1,2]]]);